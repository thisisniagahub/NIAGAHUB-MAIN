(()=>{function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},s=t.parcelRequire60cc;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return r[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire60cc=s),s.register("5BQAE",(function(t,r){e(t.exports,"getUrls",(()=>a)),e(t.exports,"setUrl",(()=>o));var n=s("kOtTY");const a=()=>{const e=(0,n.getQueryString)(),t=e.id||e.oid,r=e.e,s=e.url;return{options:d(t,r,s),history:u(t,r,s),capture:t?i(t,s):void 0,editor:t&&r?l(t,r,s):void 0}},o=(e,t,r)=>{let n=void 0!==r&&r;if(e){-1===e.href.indexOf("?")&&(e.href=t,n&&e.setAttribute("style",""))}},i=(e,t)=>{let r=void 0===t?null:t;const s={id:e};r&&(s.url=r);return"/capture.html"+("?"+(0,n.toQueryString)(s))},l=(e,t,r)=>{let s=void 0===r?null:r;const a={id:e,e:t};s&&(a.url=s);return"/editor.html"+("?"+(0,n.toQueryString)(a))},d=(e,t,r)=>{let s=void 0===e?null:e,a=void 0===t?null:t,o=void 0===r?null:r,i="";if(s){const e={id:s};a&&(e.e=a),o&&(e.url=o),i="?"+(0,n.toQueryString)(e)}return"/options.html"+i},u=(e,t,r)=>{let s=void 0===e?null:e,a=void 0===t?null:t,o=void 0===r?null:r,i="";if(s){const e={oid:s};a&&(e.e=a),o&&(e.url=o),i="?"+(0,n.toQueryString)(e)}return"/capture.html"+i}})),s.register("lHOAM",(function(t,r){e(t.exports,"BACKSPACE",(()=>a)),e(t.exports,"RETURN",(()=>o)),e(t.exports,"ALT",(()=>i)),e(t.exports,"ESC",(()=>l)),e(t.exports,"SPACE",(()=>d)),e(t.exports,"LEFT",(()=>u)),e(t.exports,"UP",(()=>c)),e(t.exports,"RIGHT",(()=>p)),e(t.exports,"DOWN",(()=>h)),e(t.exports,"DELETE",(()=>f)),e(t.exports,"NUM0",(()=>g)),e(t.exports,"A",(()=>m)),e(t.exports,"C",(()=>v)),e(t.exports,"D",(()=>y)),e(t.exports,"E",(()=>_)),e(t.exports,"P",(()=>b)),e(t.exports,"S",(()=>S)),e(t.exports,"U",(()=>x)),e(t.exports,"V",(()=>w)),e(t.exports,"Y",(()=>E)),e(t.exports,"Z",(()=>A)),e(t.exports,"PLUS",(()=>U)),e(t.exports,"MINUS",(()=>O)),e(t.exports,"SLASH",(()=>L)),e(t.exports,"asKeyboardShortcut",(()=>k)),e(t.exports,"checkCtrlLike",(()=>T)),e(t.exports,"checkRightClick",(()=>D));var n=s("5Gpcw");const a=8,o=13,i=18,l=27,d=32,u=37,c=38,p=39,h=40,f=46,g=48,m=65,v=67,y=68,_=69,b=80,S=83,x=85,w=86,E=89,A=90,U=187,O=189,L=191,k=e=>{let t=e.cmd,r=e.ctrl,s=e.alt,a=e.shift,o=e.char;const i=(0,n.getIsMac)(),l=[];return t&&l.push(i?"⌘":"⌃"),r&&l.push("⌃"),s&&l.push("⌥"),a&&l.push("⇧"),l.push(o),l.join("")},T=e=>(0,n.getIsMac)()?e.metaKey:e.ctrlKey,D=e=>"which"in e?3===e.which:"button"in e&&2===e.button})),s.register("gwJFa",(function(e,t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var a=typeof s;if("string"===a||"number"===a)e.push(s);else if(Array.isArray(s)&&s.length){var o=r.apply(null,s);o&&e.push(o)}else if("object"===a)for(var i in s)t.call(s,i)&&s[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],(function(){return r})):window.classNames=r}()})),s.register("fYpxg",(function(t,r){e(t.exports,"STRIPE_SUBSCRIPTION_STATUS",(()=>i)),e(t.exports,"objectIsLoginData",(()=>l)),e(t.exports,"default",(()=>c));var n=s("8DwkQ"),a=s("bidxc"),o=s("fiP9V");const i=["active","trialing","past_due","canceled","unpaid","incomplete","incomplete_expired"];function l(e){if(e&&"object"==typeof e){const t=e;if(t.userId&&(0,a.isPresent)(t.expires)&&(0,a.isPresent)(t.status)&&d(t.sub_created)&&d(t.expires)&&(""===t.status||i.includes(t.status)))return!0}return!1}function d(e){return(0,a.isBlank)(e)||"number"==typeof e}const u=new(0,o.default)("user",{rejected_dl:{type:"bool",default:!1},login_data:{type:"json",default:()=>({})},ab:{type:"json",default:()=>({})},show_editor_tour:{type:"bool",default:!0},has_logged_in:{type:"bool",default:!1},last_dl_type:{type:"string",default:n.DL_TYPE_IMAGE},ab_req_token:{type:"string"},show_experimental:{type:"bool",default:!1}});var c=u;window._showTour=()=>u.remove("show_editor_tour")})),s.register("dChev",(function(t,r){e(t.exports,"default",(()=>f)),e(t.exports,"resetUser",(()=>g));var n=s("8rN6d"),a=s("8bPtr"),o=s("e0Kwl"),i=s("53kz8"),l=s("ctTqV"),d=s("8DwkQ"),u=s("2z2pA"),c=s("fYpxg");const p={"":l.SUB_BAD,trialing:l.SUB_OK,active:l.SUB_OK,past_due:l.SUB_NEEDS_UPDATE,canceled:l.SUB_BAD,unpaid:l.SUB_NEEDS_UPDATE},h=(e,...t)=>(0,u.default)(`%c[\\\\USER//] ${e}`,"color: #0B3;background:#EEFFF3",...t);var f=new class{addListener(e){this._listeners.push(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}loginStateProm(e){var t=this;return(0,n.default)((function(){var r,n,s,i,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return h(`loginStateProm(${JSON.stringify(e)})`),[4,c.default.load()];case 1:if(r=a.sent(),h("got items"),(0,u.default)(r),n=t._asLoginState(r.login_data,r),h("converted data:"),(0,u.default)(n),n.subState===l.SUB_BAD)return h(`BAD SUBSTATE ${n.subState}`),[2,n];if(s=o.DateTime.now(),i=s.diff(n.updated,"days").days,h(`days since: ${i}`),!(e&&i>=31&&navigator.onLine))return[3,6];a.label=2;case 2:return a.trys.push([2,4,,5]),h("do extra login!!!!"),[4,t._login()];case 3:return d=a.sent(),h("got data!!!!"),(0,u.default)(d),[3,5];case 4:throw p=a.sent(),u.default.error("Error logging in!"),p;case 5:d&&(n=t._asLoginState(d,r)),a.label=6;case 6:return h("RETURNING DATA!!!"),(0,u.default)(n),[2,n]}}))}))()}setWebsiteABState(){var e=this;return(0,n.default)((function(){var t,r,n,s,o,i,l,d,p,f,g;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return h("[User.setWebsiteABState] start"),[4,c.default.load()];case 1:return t=a.sent(),r=t.ab,"{}"===JSON.stringify(r)?[2,!0]:(n=t.login_data,s=!(!n||!n.userId),o=Object.assign({hasUser:s},r),i=JSON.stringify(o),[4,e._getHandshake()]);case 2:(l=a.sent()).call("setAbJson",i),h("[User.setWebsiteABState] did setAbJson"),d=2,p=null,a.label=3;case 3:return d>0?(d--,[4,l.get("getAbJson")]):[3,5];case 4:f=a.sent(),h(`[User.setWebsiteABState] did getAbJson: ${f}`);try{p=JSON.parse(f)}catch(e){return h("[User -> postmate.getAbJson -> JSON.parse]"),u.default.error(e),[3,3]}return p&&"object"==typeof p?[3,5]:(h(`[User -> postmate.getAbJson -> object] not object! ${p}`),p=null,[3,3]);case 5:return p=p||{},g=Object.keys(o).every((e=>e in p)),h(`[User.setWebsiteABState] isSet? ${g}: ${JSON.stringify(p)}`),[2,g]}}))}))()}_asLoginState(e,t){h("[User._asLoginState]",e,t),e&&"object"==typeof e||u.default.error("INVALID DATA",e);const r=Object.assign({},e);["expires","updated"].forEach((e=>r[e]=o.DateTime.fromSeconds(r[e]||0))),r.status=r.status||l.STATUS_NONE;const n=o.DateTime.now();(!r.userId||n>r.expires)&&(r.status=l.STATUS_NONE);let s=p[r.status];return r.subState=s,r.store=t,r}_getHandshake(){return this._handshake||(this._handshake=new(0,i.default)({container:document.body,url:d.WEBCOMM_URL,classListArray:["h"]})),this._handshake}_login(){var e=this;return(0,n.default)((function(){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e._getHandshake()];case 1:return[4,r.sent().get("authState")];case 2:return t=r.sent(),(0,u.default)("[PARENT] authState",t),[4,e.storeLoginData(t)];case 3:return r.sent(),[2,t]}}))}))()}storeLoginData(e){h("[User.storeLoginData]",e);let t=e&&e.show_experimental;null!=t&&(delete e.show_experimental,"boolean"!=typeof t&&(t=null)),e.updated=Math.floor(o.DateTime.now().toSeconds());const r={login_data:e};return e.userId&&(r.has_logged_in=!0),null!=t&&(r.show_experimental=t),c.default.setObj(r)}constructor(){this._listeners=[],c.default.onUpdate((e=>{h(`Updated names: ${JSON.stringify(e)}`),this.loginStateProm().then((e=>{this._listeners.forEach((t=>t(e)))})).catch((e=>{h("Error loading subscription state!"),u.default.error(e)}))}))}};const g=()=>c.default.set("login_data",{})})),s.register("53kz8",(function(t,r){e(t.exports,"default",(()=>u));
/**
  postmate - A powerful, simple, promise-based postMessage library
  @version v1.5.2
  @link https://github.com/dollarshaveclub/postmate
  @author Jacob Kelley <jakie8@gmail.com>
  @license MIT
**/
var n="application/x-postmate-v1+json",s=0,a={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},o=function(e,t){return("string"!=typeof t||e.origin===t)&&(!!e.data&&(("object"!=typeof e.data||"postmate"in e.data)&&(e.data.type===n&&!!a[e.data.postmate])))},i=function(){function e(e){var t=this;this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.events={},this.listener=function(e){if(!o(e,t.childOrigin))return!1;var r=((e||{}).data||{}).value||{},n=r.data,s=r.name;"emit"===e.data.postmate&&s in t.events&&t.events[s].call(t,n)},this.parent.addEventListener("message",this.listener,!1)}var t=e.prototype;return t.get=function(e){var t=this;return new d.Promise((function(r){var a=++s;t.parent.addEventListener("message",(function e(n){n.data.uid===a&&"reply"===n.data.postmate&&(t.parent.removeEventListener("message",e,!1),r(n.data.value))}),!1),t.child.postMessage({postmate:"request",type:n,property:e,uid:a},t.childOrigin)}))},t.call=function(e,t){this.child.postMessage({postmate:"call",type:n,property:e,data:t},this.childOrigin)},t.on=function(e,t){this.events[e]=t},t.destroy=function(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)},e}(),l=function(){function e(e){var t=this;this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",(function(e){if(o(e,t.parentOrigin)){var r=e.data,s=r.property,a=r.uid,i=r.data;"call"!==e.data.postmate?function(e,t){var r="function"==typeof e[t]?e[t]():e[t];return d.Promise.resolve(r)}(t.model,s).then((function(t){return e.source.postMessage({property:s,postmate:"reply",type:n,uid:a,value:t},e.origin)})):s in t.model&&"function"==typeof t.model[s]&&t.model[s](i)}}))}return e.prototype.emit=function(e,t){this.parent.postMessage({postmate:"emit",type:n,value:{name:e,data:t}},this.parentOrigin)},e}(),d=function(){function e(e){var t=e.container,r=void 0===t?void 0!==r?r:document.body:t,n=e.model,s=e.url,a=e.name,o=e.classListArray,i=void 0===o?[]:o;return this.parent=window,this.frame=document.createElement("iframe"),this.frame.name=a||"",this.frame.classList.add.apply(this.frame.classList,i),r.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=n||{},this.sendHandshake(s)}return e.prototype.sendHandshake=function(t){var r,s=this,a=function(e){var t=document.createElement("a");t.href=e;var r=t.protocol.length>4?t.protocol:window.location.protocol,n=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||r+"//"+n}(t),l=0;return new e.Promise((function(e,d){s.parent.addEventListener("message",(function t(n){return!!o(n,a)&&("handshake-reply"===n.data.postmate?(clearInterval(r),s.parent.removeEventListener("message",t,!1),s.childOrigin=n.origin,e(new i(s))):d("Failed handshake"))}),!1);var u=function(){l++,s.child.postMessage({postmate:"handshake",type:n,model:s.model},a),5===l&&clearInterval(r)},c=function(){u(),r=setInterval(u,500)};s.frame.attachEvent?s.frame.attachEvent("onload",c):s.frame.onload=c,s.frame.src=t}))},e}();d.debug=!1,d.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),d.Model=function(){function e(e){return this.child=window,this.model=e,this.parent=this.child.parent,this.sendHandshakeReply()}return e.prototype.sendHandshakeReply=function(){var e=this;return new d.Promise((function(t,r){e.child.addEventListener("message",(function s(a){if(a.data.postmate){if("handshake"===a.data.postmate){e.child.removeEventListener("message",s,!1),a.source.postMessage({postmate:"handshake-reply",type:n},a.origin),e.parentOrigin=a.origin;var o=a.data.model;return o&&Object.keys(o).forEach((function(t){e.model[t]=o[t]})),t(new l(e))}return r("Handshake Reply Failed")}}),!1)}))},e}();var u=d}))})();
//# sourceMappingURL=options.0c15b6d1.js.map
